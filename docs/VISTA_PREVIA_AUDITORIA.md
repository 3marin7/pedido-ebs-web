# ğŸ“Š VISTA PREVIA DEL SISTEMA DE AUDITORÃA

## ğŸ¨ Pantalla Principal: Historial de Movimientos

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    ğŸ“Š Historial de Movimientos de Inventario
                 Registro completo de todos los cambios en el stock
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FILTROS                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Producto:              Tipo de Movimiento:   Desde:   Hasta:  â”‚
â”‚  [â–¼ Todos los productos] [â–¼ Todos los tipos]  [____]   [____]  â”‚
â”‚                                                                 â”‚
â”‚          [Limpiar Filtros]           [ğŸ“¥ Exportar CSV]         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RESUMEN DE MOVIMIENTOS                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total de Movimientos â”‚    Ventas    â”‚   Entradas   â”‚  Ajustes   â”‚
â”‚        42            â”‚      35      â”‚       5      â”‚      2     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HISTORIAL DETALLADO                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¤
â”‚ Fecha                  â”‚ Producto â”‚ Tipo       â”‚ Cantidad     â”‚ ...  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ 26/01/2026 14:32:15    â”‚ Gigo     â”‚ ğŸ“¦ Venta   â”‚     10       â”‚      â”‚
â”‚ Stock Anterior: 100    â”‚          â”‚            â”‚ Stock Nuevo: 90    â”‚
â”‚ Usuario: Edwin Marin   â”‚          â”‚ Factura #12345                 â”‚
â”‚ Desc: Venta de 10 unidades de Gigo                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ 26/01/2026 10:15:42    â”‚ Arroz    â”‚ ğŸ“¥ Entrada â”‚     50       â”‚      â”‚
â”‚ Stock Anterior: 150    â”‚          â”‚            â”‚ Stock Nuevo: 200   â”‚
â”‚ Usuario: Sistema       â”‚          â”‚ Factura -                      â”‚
â”‚ Desc: Compra de 50 unidades de Arroz                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ 25/01/2026 16:45:20    â”‚ Cerveza  â”‚ ğŸ”§ Ajuste  â”‚      5       â”‚      â”‚
â”‚ Stock Anterior: 95     â”‚          â”‚            â”‚ Stock Nuevo: 100   â”‚
â”‚ Usuario: Admin         â”‚          â”‚ Factura -                      â”‚
â”‚ Desc: Ajuste por discrepancia en conteo                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Flujo de Datos Visualizado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USUARIO CREA FACTURA   â”‚
â”‚  (InvoiceScreen.jsx)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â–º Selecciona Cliente âœ“
         â”œâ”€â–º Selecciona Vendedor âœ“
         â”œâ”€â–º Agrega 10 Gigo @$29.000 âœ“
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GUARDA FACTURA              â”‚
â”‚  (Presiona botÃ³n Guardar)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â–º INSERT en tabla "facturas" âœ“
         â”‚   â””â”€ ID: 12345
         â”‚
         â”œâ”€â–º UPDATE tabla "productos" âœ“
         â”‚   â””â”€ stock: 100 â†’ 90
         â”‚   â””â”€ activo: true (sigue activo)
         â”‚
         â”œâ”€â–º INSERT en "movimientos_inventario" âœ“ ğŸ¯
         â”‚   â””â”€ producto_id: 1
         â”‚   â””â”€ tipo_movimiento: 'venta'
         â”‚   â””â”€ cantidad: 10
         â”‚   â””â”€ stock_anterior: 100
         â”‚   â””â”€ stock_nuevo: 90
         â”‚   â””â”€ factura_id: 12345
         â”‚   â””â”€ usuario: 'Edwin Marin'
         â”‚   â””â”€ descripcion: 'Venta de 10 unidades...'
         â”‚   â””â”€ fecha_movimiento: 2026-01-26 14:32:15
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… FACTURA GUARDADA         â”‚
â”‚  Mensaje: "Â¿Deseas imprimir?"â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HISTORIAL DISPONIBLE        â”‚
â”‚  Ruta: /movimientos          â”‚
â”‚                              â”‚
â”‚  âœ“ Ver todos los movimientos â”‚
â”‚  âœ“ Filtrar por producto      â”‚
â”‚  âœ“ Filtrar por tipo          â”‚
â”‚  âœ“ Filtrar por fechas        â”‚
â”‚  âœ“ Exportar a CSV            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Estructura de Datos

### Tabla: `movimientos_inventario`

```
ID  â”‚ Producto â”‚ Tipo    â”‚ Cant â”‚ Ante â”‚ Nuevo â”‚ Usuario      â”‚ Factura â”‚ Fecha                â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1   â”‚ Gigo     â”‚ venta   â”‚ 10   â”‚ 100  â”‚ 90    â”‚ Edwin Marin  â”‚ 12345   â”‚ 2026-01-26 14:32:15 â”‚
2   â”‚ Arroz    â”‚ entrada â”‚ 50   â”‚ 150  â”‚ 200   â”‚ Sistema      â”‚ NULL    â”‚ 2026-01-26 10:15:42 â”‚
3   â”‚ Cerveza  â”‚ ajuste  â”‚ 5    â”‚ 95   â”‚ 100   â”‚ Admin        â”‚ NULL    â”‚ 2026-01-25 16:45:20 â”‚
4   â”‚ Gigo     â”‚ venta   â”‚ 5    â”‚ 90   â”‚ 85    â”‚ Edwin Marin  â”‚ 12346   â”‚ 2026-01-25 09:10:00 â”‚
```

---

## ğŸ” Ejemplos de Filtrado

### Filtro 1: Ver solo ventas de "Gigo"
```
Producto: Gigo
Tipo: venta
Resultado: 2 registros (10 unidades + 5 unidades)
```

### Filtro 2: Ver movimientos de enero
```
Desde: 01/01/2026
Hasta: 31/01/2026
Resultado: 4 registros (todos)
```

### Filtro 3: Ver entradas de la Ãºltima semana
```
Tipo: entrada
Desde: 20/01/2026
Hasta: 26/01/2026
Resultado: 1 registro (Arroz 50 unidades)
```

---

## ğŸ“Š Colores en la Tabla

```
ğŸ”´ VENTA      - Rojo    (#e74c3c)  - Disminuye stock
ğŸŸ¢ ENTRADA    - Verde   (#27ae60)  - Aumenta stock
ğŸŸ  AJUSTE     - Naranja (#f39c12)  - CorrecciÃ³n
ğŸ”µ DEVOLUCIÃ“N - Azul    (#3498db)  - Retorno de cliente
```

---

## ğŸ“¥ Exportar a CSV

Cuando haces clic en "Exportar CSV", descarga un archivo:
```
movimientos_inventario_2026-01-26.csv
```

Contenido:
```csv
"Fecha","Producto","Tipo","Cantidad","Stock Anterior","Stock Nuevo","Usuario","Factura","DescripciÃ³n"
"26/01/2026 14:32:15","Gigo","venta","10","100","90","Edwin Marin","12345","Venta de 10 unidades de Gigo"
"26/01/2026 10:15:42","Arroz","entrada","50","150","200","Sistema","-","Compra de 50 unidades de Arroz"
"25/01/2026 16:45:20","Cerveza","ajuste","5","95","100","Admin","-","Ajuste por discrepancia en conteo"
```

Puedes abrirlo en:
- Excel âœ“
- Google Sheets âœ“
- Numbers (Mac) âœ“
- Cualquier editor de texto âœ“

---

## ğŸ¯ Acceso por Rol

### Admin
```
MenÃº â†’ Bodega â†’ Historial Movimientos
Acceso: Completo
Puede: Ver, filtrar, exportar
```

### Inventario
```
MenÃº â†’ Historial Movimientos
Acceso: Completo
Puede: Ver, filtrar, exportar
```

### Vendedor
```
No tiene acceso directo
(pero sus movimientos quedan registrados bajo su nombre)
```

### Contabilidad
```
No tiene acceso directo en esta versiÃ³n
(pero puede acceder a reportes de auditorÃ­a)
```

---

## ğŸ§ª Ejemplo PrÃ¡ctico de Uso

**Escenario:** El gerente nota que hay faltantes y quiere saber quÃ© pasÃ³ con el producto "Gigo"

1. **Abre la app**
2. **Navega a:** Bodega â†’ Historial Movimientos
3. **Filtra por producto:** "Gigo"
4. **Resultado:** Ve todos los movimientos de Gigo
   - Venta 10 unidades (26/01 14:32) - Factura #12345
   - Venta 5 unidades (25/01 09:10) - Factura #12346
   - Venta 15 unidades el dÃ­a anterior
5. **ConclusiÃ³n:** Se vendieron 30 unidades en 2 dÃ­as
6. **AcciÃ³n:** Verifica facturas #12345 y #12346 para confirmar

---

## âœ¨ Ventajas del Sistema

âœ… **AutomÃ¡tico** - Se registra sin intervenciÃ³n
âœ… **Completo** - Captura todos los datos relevantes
âœ… **Seguro** - Tabla con auditorÃ­a permanente
âœ… **Trazable** - Liga ventas con cambios
âœ… **Reportable** - Exporta a CSV para anÃ¡lisis
âœ… **Responsable** - Registra quiÃ©n hizo quÃ©
âœ… **RÃ¡pido** - BÃºsquedas indexadas
âœ… **Legal** - Cumple requisitos de auditorÃ­a

---

## ğŸš€ Ya estÃ¡ implementado:

âœ… Tabla SQL creada
âœ… FunciÃ³n de registro en InvoiceScreen
âœ… Componente HistorialMovimientos
âœ… Estilos CSS responsivos
âœ… Filtros funcionales
âœ… ExportaciÃ³n a CSV
âœ… Enlace en navegaciÃ³n
âœ… Manejo de errores

**Â¡Solo ejecuta el script SQL y estÃ¡ listo!**
